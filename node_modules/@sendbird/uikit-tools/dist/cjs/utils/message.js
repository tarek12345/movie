"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getMessageUniqId = exports.isNewMessage = exports.isMyMessage = exports.isSendableMessage = void 0;
function isSendableMessage(msg) {
    return msg !== undefined && msg !== null && 'sendingStatus' in msg;
}
exports.isSendableMessage = isSendableMessage;
function isMyMessage(msg, currentUserId = '##__USER_ID_IS_NOT_PROVIDED__##') {
    var _a;
    if (!isSendableMessage(msg))
        return false;
    return ((_a = msg.sender) === null || _a === void 0 ? void 0 : _a.userId) === currentUserId;
}
exports.isMyMessage = isMyMessage;
function isNewMessage(msg, currentUserId) {
    const myMessage = isMyMessage(msg, currentUserId);
    if (myMessage)
        return false;
    if (msg.isAdminMessage())
        return false;
    return msg.updatedAt === 0;
}
exports.isNewMessage = isNewMessage;
function getMessageUniqId(msg) {
    if ('sendingStatus' in msg) {
        if (msg.sendingStatus === 'succeeded')
            return String(msg.messageId);
        return msg.reqId;
    }
    return String(msg.messageId);
}
exports.getMessageUniqId = getMessageUniqId;
