import type { PartialDeep } from 'type-fest';

import { isBoolean } from '../../../utils/validators.js';
import type { SBUConfig, SBUConfigRemote } from '../../types';

export function updateCommonConfigs(
  target: SBUConfig['common'],
  local: PartialDeep<SBUConfig>,
  remote: PartialDeep<SBUConfigRemote>,
) {
  // common.enableUsingDefaultUserProfile
  if (remote.common && isBoolean(remote.common?.enableUsingDefaultUserProfile)) {
    target.enableUsingDefaultUserProfile = remote.common.enableUsingDefaultUserProfile;
  }
  if (local.common && isBoolean(local.common?.enableUsingDefaultUserProfile)) {
    target.enableUsingDefaultUserProfile = local.common.enableUsingDefaultUserProfile;
  }
}
